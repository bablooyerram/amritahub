<!DOCTYPE html>
<html>
{% load static %}
<title>Home</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-indigo.css">
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html, body, h1, h2, h3, h4, h5 {font-family: "Open Sans", sans-serif}
.searchbar{
  height:100%
  /* color:black; */
  padding:5px;
}
  .navbar{
  	height:45px;
    text-align:middle;
    margin:auto;
  }
 
  center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
</style>
<body class="w3-theme-l5">
{% if message %}
<script>
    alert('{{ message }}');


</script>
{% endif %}
<script>
function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result);
                $('#blah').css('visibility','visible');

            };

            reader.readAsDataURL(input.files[0]);

        }
    }
function dit() {
  var x = document.getElementById("Edit");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else {
    x.className = x.className.replace("w3-show", "");
  }
}
    console.log("hi");
    var url='{{ profile.img.url|slice:"12:" }}';

    console.log(url);

function chooseFile() {
      $("#fileInput").click();
   }

</script>

  <!-- Navbar -->
  <div class="w3-top">
   <div class="w3-bar w3-theme-d2 w3-left-align w3-large navbar">
    <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-theme-d2" href="javascript:void(0);" onclick="openNav()">
      <i class="fa fa-bars"></i></a>
    <a href="/home/" class="w3-bar-item w3-button w3-padding-large w3-theme-d4 navbar"><i class="fa fa-home w3-margin-right"></i>Amrita Hub</a>
     <div>
  	<input type="text" class="w3-bar-item w3-padding-large w3-hide-small w3-input navbar" placeholder="Search...">
       <a href="#" class="w3-bar-item w3-padding-large w3-hide-small w3-button w3-theme-l1"><i class="fa fa-search navbar"></i></a></div>
    <a href="/logout/" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" title="Logout">
      <img src='{% static "images/logout.png" %}' class="w3-circle" style="height:23px;width:23px" alt="Logout">
    <a href="/profile/" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" title="My Account"><img src='{%static profile.img.url|slice:"12:" %}'  class="w3-circle" style="height:23px;width:23px" alt="Logout"></a>

      <a href="/message/" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white" title="Notifications"><i class="fa fa-bell"></i></a>
    </a>
   </div>
  </div>

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-bar-block w3-theme-d2 w3-hide w3-hide-large w3-hide-medium w3-large">
    <a href="/message/" class="w3-bar-item w3-button w3-padding-large">Notifications</a>
    <a href="/profile/" class="w3-bar-item w3-button w3-padding-large">My Profile</a>    
    <a href="/logout/" class="w3-bar-item w3-button w3-padding-large">Logout</a>
  </div>

<!-- Page Container -->
<div class="w3-container w3-content" style="max-width:1400px;margin-top:80px">
  <!-- The Grid -->
  <div class="w3-row">
    <!-- Left Column -->
    
    
   <div class="w3-col m3">
      <!-- Profile -->
      <div class="w3-card w3-round w3-white">
        <div class="w3-container">
         <h4 class="w3-center">Messages</h4>
         <hr>
         <button onclick="myFunc('demo1')" class="w3-button w3-block w3-left-align w3-blue"><i class="fa fa-user fa-fw w3-margin-center"></i>Friends</button>&nbsp;&nbsp;&nbsp;
          <div id="demo1" class="w3-hide w3-container">
            <p>My Friends list...</p>
          </div>
         <button onclick="myFunc('demo2')" class="w3-button w3-block w3-left-align w3-teal"><i class="fa fa-users fa-fw w3-margingin-center"></i> Groups</button>&nbsp;&nbsp;&nbsp;
          <div id="demo2" class="w3-hide w3-container">
            <p>My Groups list...</p>
          </div>
         <button onclick="myFunc('demo3')" class="w3-button w3-block w3-left-align w3-indigo"><i class="fa fa-bullhorn fa-fw w3-margin-center"></i> Discord/Broadcast</button>&nbsp;&nbsp;&nbsp;
          <div id="demo3" class="w3-hide w3-container">
            <p>Broadcast msg to everyone...</p>
          </div>
        </div>
      </div>
      <br>

      <!-- Accordion -->
      <div class="w3-card w3-round">
        <div class="w3-white">
          <button onclick="window.location.href = '/friends/';" class="w3-button w3-block w3-theme-l1 w3-left-align"><i class="fa fa-circle-o-notch fa-fw w3-margin-right"></i> My Friends</button>
          <div id="Demo1" class="w3-hide w3-container">
          </div>  
          <button onclick="window.location.href='/event/';" class="w3-button w3-block w3-theme-l1 w3-left-align"><i class="fa fa-calendar-check-o fa-fw w3-margin-right"></i> My Events</button>
          <div id="Demo2" class="w3-hide w3-container">
          </div>
          <button onclick="window.location.href='/photos/';" class="w3-button w3-block w3-theme-l1 w3-left-align"><i class="fa fa-users fa-fw w3-margin-right"></i> My Photos</button>
          <div id="Demo3" class="w3-hide w3-container">
          </div>
        </div>
      </div>
      <br>

      <!-- Interests -->
      

      <!-- Alert Box -->

    <!-- End Left Column -->
    </div>

    <!-- Middle Column -->
    <div class="w3-col m7">
<form action="/uploadpost/" method="post" enctype="multipart/form-data" >
    {% csrf_token %}
      <div class="w3-row-padding">
        <div class="w3-col m12">
          <div class="w3-card w3-round w3-white">
            <div class="w3-container w3-padding">
              <h6 class="w3-opacity">Post Something</h6>
              <input type="text"  name="caption" placeholder="status" class="w3-input w3-border">


    <img id="blah"  src="#" alt="image" style="width:70%%;visibility: hidden;margin:2%;"   />

                <div style="height:0px;overflow:hidden">
   <input type="file" id="fileInput" name="fileInput" onchange="readURL(this);" />
</div>
              <button type="submit" class="w3-button w3-theme"><i class="fa fa-pencil"></i>  Post</button>

                <button type="button" onclick="chooseFile();" class="w3-button w3-theme"><i class="fa fa-picture-o"></i>  upload image</button>
            </div>
          </div>
        </div>
      </div>
</form>
      {% for po in post %}


      <div class="w3-container w3-card w3-white w3-round w3-margin"><br>
        <img src='{%static po.username.img.url|slice:"12:" %}' alt="Avatar" class="w3-left w3-circle w3-margin-right" style="width:60px">

        <span class="w3-right w3-opacity" style="margin-left:20px;">
          <div class="w3-dropdown-click">
            <button onclick="dit()" class="w3-button" style="padding-top:0px;"><i class="fa fa-ellipsis-h"></i></button>
            <div id="Edit" class="w3-dropdown-content w3-bar-block w3-border w3-black">
              <a href="#" class="w3-bar-item w3-button">Edit</a>
              <a href="#" class="w3-bar-item w3-button">Share</a>
              <a href="#" class="w3-bar-item w3-button">Delete</a>
            </div>
          </div>
        </span>
        <span class="w3-right w3-opacity">{{ po.date }}</span>
        <h4>{{ po.username }}</h4><br>
        <hr class="w3-clear">
        <p>{{ po.caption }}</p>
          {% if po.img %}
          <div class="w3-row-padding" style="margin:0 -16px">
            <div class="w3-full">
              <img src='{% static po.img.url|slice:"12:" %}' style="width:100%"  class="w3-margin-bottom">
            </div>

        </div>
          {% endif %}
          {% with name=po.id %}


          {% if likes|keyvalue:name %}
          <a href="/likepost/{{ po.id }}" class="w3-button w3-theme-d2 w3-margin-bottom"><i class="fa fa-thumbs-up"></i>Liked</a>
          {% else %}
          <a href="/likepost/{{ po.id }}" class="w3-button w3-theme-d2 w3-margin-bottom"><i class="fa fa-thumbs-up"></i>Like</a>
          {% endif %}
          {% endwith %}

          <a href="/commentpost/{{ po.id }}" class="w3-button w3-theme-d2 w3-margin-bottom"><i class="fa fa-comment"></i></i>comments</a>

      </div>

      {% endfor %}
    <!-- End Middle Column -->
    </div>

    <!-- Right Column -->
    <div class="w3-col m2">
      <div class="w3-card w3-round w3-white w3-center">
        <div class="w3-container">
          <p>Upcoming Events:</p>
          <img src="#" alt="image" style="width:100%;">
          <p><strong>Holiday</strong></p>
          <p>Friday 15:00</p>
          <p><button class="w3-button w3-block w3-theme-l4">Info</button></p>
        </div>
      </div>
      <br>

      <div class="w3-card w3-round w3-white w3-center">
        <div class="w3-container">
          <p>Friend Request</p>
          <img src="/w3images/avatar6.png" alt="Avatar" style="width:50%"><br>
          <span>babloo</span>
          <div class="w3-row w3-opacity">
            <div class="w3-half">
              <button class="w3-button w3-block w3-green w3-section" title="Accept"><i class="fa fa-check"></i></button>
            </div>
            <div class="w3-half">
              <button class="w3-button w3-block w3-red w3-section" title="Decline"><i class="fa fa-remove"></i></button>
            </div>
          </div>
        </div>
      </div>
      <br>


    <!-- End Right Column -->
    </div>

  <!-- End Grid -->
  </div>

<!-- End Page Container -->
</div>
<br>

<!-- Footer -->
<footer class="w3-container w3-theme-d3 w3-padding-16">
  <a href="https://www.amrita.edu"><h5>Visit Amrita Page</h5></a>
</footer>


<script>


// Accordion
/*function myFunction(id) {
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
    x.previousElementSibling.className += " w3-theme-d1";
  } else {
    x.className = x.className.replace("w3-show", "");
    x.previousElementSibling.className =
    x.previousElementSibling.className.replace(" w3-theme-d1", "");
  }
}*/
function myFunc(id) 
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}

// Used to toggle the menu on smaller screens when clicking on the menu button
function openNav() {
  var x = document.getElementById("navDemo");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else {
    x.className = x.className.replace(" w3-show", "");
  }
}

</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</body>
</html>
